@import "./reset.css";
@import "./fonts/fonts.css";
@import "./specimen.css";

html
{
	--breakpoint: 700px;
	overflow: hidden;
	height:100%;
}

body
{
  background-color: black;
  font-weight: 400;
  box-sizing: border-box;
	height:100%;
}

/* Debugging text frames */

#margin-container.debug
{
	border-top: 1px solid red;
}

#primary-text-frame
{
	display: block;
	top:0;
	height:80vh;
	margin:1rem;
}
#primary-text-frame.debug
{
	border-bottom:2px solid red;
}

.sidebar-text-frame
{

	font-family: "Ray";

	display:none;
	position: relative;
	width:25vw;
	height:80vh;
	margin:1rem;
}
.sidebar-text-frame.debug
{

	border-bottom:1px solid red;
}

.sidebar-text-bottom-anchor {
	position: absolute;
	bottom:0;
	width:100%;
}

.story-frame
{
	display: block;
  color:white;
  font-size:60px;
  height:fit-content;

	-webkit-backface-visibility: hidden;
	-webkit-perspective: 1000;
  backface-visibility: hidden;
	transform-style: preserve-3d;
	perspective: 550px;
	overflow: visible;

	line-height: 1.1em;
}
.story-frame.debug
{
	border-bottom:2px solid orange;
}

#primary-text-frame.ended,
.story-frame.ended,
.margin-text-frame.ended,
#sidebar-text-frame.ended
{
	display:none;
}

.margin-text-frame
{
	font-family: "Ray";

	position: absolute;
	top:85vh;
  color:white;
  display:flex;
  flex-wrap: wrap;
	margin:1rem;

  font-weight: 100;
  width:calc(100vw - 2rem);
}

.margin-text-frame .word,
.margin-text-frame .channel
{
	white-space: normal;
	width: 29vw;
	margin-right: 2vw;
}

.sidebar-text-frame .word,
.sidebar-text-frame .channel
{
	white-space: normal;
	width: 100%;
	margin-bottom: 2vw;
}

.sidebar-text-frame .word:last-child,
.sidebar-text-frame .channel:last-child
{
	margin-bottom:0;
}

.end-text-frame
{
	font-family: "Ray";
	display: none;
	color:white;
	opacity: 0;
	margin:1rem;
	transition:opacity 4s;
}
.end-text-frame.active
{
	display: block;
}
.end-text-frame:not(.pending)
{
	opacity: 1;
}
.end-text-frame.debug
{
	/* border:1px solid cyan; */
}

.end-text-frame .story-box
{
	height:50vh;
}
.end-text-frame h1
{
	font-size: 72px;
	font-weight: 900;
	margin-bottom:0.5em;
}

.end-text-frame #edition-number
{
	font-size: 36px;
}


.end-text-frame .meta-box
{
	font-size: calc(max(2vh, 18px));
	display:flex;
  flex-wrap: wrap;
	/* border-top: 1px dotted white; */
	padding-top:1em;
	font-weight:100;

}
.end-text-frame .story-column
{
	width:49%;
	line-height: 1.1em;
}
.end-text-frame .story-column:first-child
{
	margin-right:2%;
}

.end-text-frame .story-column h2
{
	font-size: calc(max(2.5vh, 24px));
	font-weight: 600;
	margin-bottom:1em;
}



.end-text-frame .story-column p
{
	margin-bottom:1em;
}

.end-text-frame .story-column a
{
	color:inherit;
	/* border-bottom:1px solid white; */
}


#state-indicator
{
	position: absolute;
	font-family: "Ray";

	display: flex;
	text-align: center;
	justify-content: center;
	flex-direction: column;
	font-size: 52px;

	right:20px;
	bottom:20px;
	width:25px;
	height:25px;
	color: #fff;
	background-color: #000;
	border-radius: 50%;

	opacity:0;
}

#state-indicator.active {
	opacity:1;
}
#state-indicator.done
{
	opacity:0;
	transition:opacity 2s;
}
#state-indicator.transition {
	opacity:1;
	transition:opacity 50ms;
}



.word
{
	display: inline-block;
	color:white;
	white-space: nowrap;

	-webkit-backface-visibility: hidden;
	backface-visibility: hidden;
	-webkit-perspective: 1000;
	transform: translateZ(0);
}

.channeled-word
{
	position: relative;
}

.word.pending, .channeled-word.pending
{
  color:transparent;
	filter: blur(10px);
}


.r-channel {color:rgb(255, 0, 0);}

.g-channel {color:rgb(0, 255, 0);}

.b-channel {color:rgb(0, 0, 255);}


.word.pending .channel,
.word.pending .r-channel,
.word.pending .g-channel,
.word.pending .b-channel
{
	color:transparent;
	filter: blur(10px);
	mix-blend-mode: normal;
}


/* Channelled-word specific styles */

.channel {
	display: inline-block;
	position: absolute;
	top:0;
	left:0;

	mix-blend-mode: color-dodge;
	transition:
		opacity 1250ms cubic-bezier(0.7, 0, 0.84, 0),
		filter 1250ms cubic-bezier(0.7, 0, 0.84, 0),
		color 1250ms cubic-bezier(0.7, 0, 0.84, 0);
}

.static-channel {
	opacity: 0;
}

/* Marginalia Sizes across screen widths */

/* Sidebar visible */

@media screen and (min-width:1250px) {
	.margin-text-frame .word,
	.margin-text-frame .channel
	{
		white-space: normal;
		width: 17vw;
		margin-right: 2vw;
	}

	.margin-text-frame .word:nth-child(n+6)
	{
		display: none;
	}

	#sidebar-text-frame
	{
		width:17vw;
		margin-right: 2vw;
		display:block;
	}

	#primary-text-frame
	{
		position:absolute;
		left:19vw;

		width:calc(81vw - 2rem);
	}
}


@media screen and (min-width:1000px) and (max-width:1250px) {
	.margin-text-frame .word,
	.margin-text-frame .channel
	{
		white-space: normal;
		width: 21vw;
		margin-right: 2vw;
	}

	.margin-text-frame .word:nth-child(n+5)
	{
		display: none;
	}

	#sidebar-text-frame
	{
		width:20vw;
		margin-right: 2vw;
		display:block;
	}

	#primary-text-frame
	{
		position:absolute;
		left:23vw;

		width:calc(77vw - 2rem);
	}
}



/* No sidebar visible */

@media screen and (min-width:750px) and (max-width:1000px) {
	.margin-text-frame .word,
	.margin-text-frame .channel
	{
		white-space: normal;
		width: 29vw;
		margin-right: 2vw;
	}

	.margin-text-frame .word:nth-child(n+4)
	{
		display: none;
	}
}


@media screen and (min-width:580px) and (max-width:750px) {
	.margin-text-frame .word,
	.margin-text-frame .channel
	{
		white-space: normal;
		width: 27vw;
		margin-right: 3.5vw;
	}

	.margin-text-frame .word:nth-child(n+4)
	{
		display: none;
	}

	.end-text-frame .story-box
	{
		height:25vh;
	}

	.end-text-frame .story-column
	{
		width:60%;
		margin-bottom:2em;
	}
}

@media screen and (max-width:580px) {
	.margin-text-frame .word,
	.margin-text-frame .channel
	{
		white-space: normal;
		width: 40vw;
		margin-right: 4.5vw;
	}

	.margin-text-frame .word:nth-child(n+3)
	{
		display: none;
	}

	.end-text-frame .story-box
	{
		height:25vh;
	}

	.end-text-frame .story-column
	{
		width:80%;
		margin-bottom:2em;
	}
}
